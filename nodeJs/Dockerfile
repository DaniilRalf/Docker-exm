FROM node:19.0.0

# Создаем новый маршрут в образе и переходим туда, там будут лежать все наши файлы
WORKDIR /usr/src/app

# Установить зависимости приложения
# Подстановочный знак используется для обеспечения копирования как package.json, так и package-lock.json
COPY package*.json ./

# ЗАпускаем утвновку зависимостей
# Если вы создаете свой код для производства
# RUN npm ci --only=production
RUN npm install

# Копируем все содержимое проекта в образ
COPY .. .

# приложение привязывается к порту 8000,
# поэтому вы будете использовать EXPOSE инструкцию для его сопоставления с docker демоном
EXPOSE 8000

# CMD определяет среду выполнения
CMD [ "node", "index.js" ]
